(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16a265b0"],{"3e7b":function(t,e,i){"use strict";i("eb6f")},8629:function(t,e,i){"use strict";i.r(e);var c=i("7a23"),o={class:"table mt-4"},n=Object(c["i"])("thead",null,[Object(c["i"])("tr",null,[Object(c["i"])("th",{width:"120"},[Object(c["i"])("span",null,"分類")]),Object(c["i"])("th",{width:"120"},"產品名稱"),Object(c["i"])("th",{width:"120"},[Object(c["i"])("span",null,"原價")]),Object(c["i"])("th",{width:"120"},[Object(c["i"])("span",null,"售價")]),Object(c["i"])("th",{width:"110"},[Object(c["i"])("span",null,"是否啟用")]),Object(c["i"])("th",{width:"50"},[Object(c["i"])("span",null,"編輯")])])],-1),a={class:"text-right"},l={class:"text-right"},s={class:"position-relative"},r={key:0,class:"text-success"},d={key:1,class:"text-danger"},b={class:"form-check form-switch d-inline-block position-absolute top-50 end-0 translate-middle-y"},u={class:"btn-group"};function p(t,e,i,p,m,f){var h=Object(c["D"])("loading"),j=Object(c["D"])("Pagination"),O=Object(c["D"])("Goodmodal"),g=Object(c["D"])("Delmodal"),v=Object(c["D"])("Addbutton");return Object(c["w"])(),Object(c["e"])(c["a"],null,[Object(c["i"])(h,{active:m.isLoading},null,8,["active"]),Object(c["i"])("table",o,[n,Object(c["i"])("tbody",null,[(Object(c["w"])(!0),Object(c["e"])(c["a"],null,Object(c["B"])(m.data,(function(e){return Object(c["w"])(),Object(c["e"])("tr",{key:e.id,id:e.id},[Object(c["i"])("td",null,Object(c["G"])(e.category),1),Object(c["i"])("td",null,Object(c["G"])(e.title),1),Object(c["i"])("td",a,Object(c["G"])(t.$filter.currency(e.origin_price)),1),Object(c["i"])("td",l,Object(c["G"])(t.$filter.currency(e.price)),1),Object(c["i"])("td",s,[1===e.is_enabled?(Object(c["w"])(),Object(c["e"])("span",r,"啟用")):(Object(c["w"])(),Object(c["e"])("span",d,"未啟用")),Object(c["i"])("div",b,[Object(c["i"])("input",{checked:1===e.is_enabled,onClick:function(t){return f.enabledButton(e)},class:"form-check-input",type:"checkbox",id:"flexSwitchCheckDefault"},null,8,["checked","onClick"])])]),Object(c["i"])("td",null,[Object(c["i"])("div",u,[Object(c["i"])("button",{onClick:function(t){return f.openForm(!1,e)},class:"btn btn-outline-primary btn-sm"},"編輯",8,["onClick"]),Object(c["i"])("button",{onClick:function(t){return f.delCheck(e)},class:"btn btn-outline-danger btn-sm"},"刪除",8,["onClick"])])])],8,["id"])})),128))])]),Object(c["i"])(j,{pageinfo:m.pagination,onEmitChangePage:f.getData},null,8,["pageinfo","onEmitChangePage"]),Object(c["i"])(O,{ref:"modal",nowData:m.temp,onEmitUpdateGoods:f.updateGoods},null,8,["nowData","onEmitUpdateGoods"]),Object(c["i"])(g,{ref:"delcheck",nowData:m.temp,onEmitDelitem:f.delItem},null,8,["nowData","onEmitDelitem"]),Object(c["i"])(v,{onEmitOpenNewModal:e[1]||(e[1]=function(t){return f.openForm(!0)})})],64)}var m=i("5530"),f=(i("99af"),i("a15b"),i("a9e3"),i("1799")),h=(i("a4d3"),i("e01a"),{ref:"modal",class:"modal fade",tabindex:"-1",role:"dialog"}),j={class:"modal-dialog modal-xl",role:"document"},O={class:"modal-content border-0"},g=Object(c["i"])("div",{class:"modal-header bg-dark text-white"},[Object(c["i"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(c["i"])("span",null,"新增產品")]),Object(c["i"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),v={class:"modal-body"},y={class:"row"},w={class:"col-sm-4"},k=Object(c["i"])("div",{class:"mb-3"},[Object(c["i"])("label",{for:"image",class:"form-label"},"輸入圖片網址"),Object(c["i"])("input",{type:"text",class:"form-control",id:"image",placeholder:"請輸入圖片連結"})],-1),x={class:"mb-3"},D=Object(c["i"])("label",{for:"customFile",class:"form-label"},[Object(c["h"])("或 上傳圖片 "),Object(c["i"])("i",{class:"fas fa-spinner fa-spin"})],-1),C=Object(c["g"])('<div class="mt-5"><div class="mb-3 input-group"><input type="url" class="form-control form-control" placeholder="請輸入連結"><button type="button" class="btn btn-outline-danger"> 移除 </button></div><div><button class="btn btn-outline-primary btn-sm d-block w-100"> 新增圖片 </button></div></div>',1),$={class:"col-sm-8"},_={class:"mb-3"},U=Object(c["i"])("label",{for:"title",class:"form-label"},"標題",-1),M={class:"row gx-2"},P={class:"mb-3 col-md-6"},G=Object(c["i"])("label",{for:"category",class:"form-label"},"分類",-1),I={class:"mb-3 col-md-6"},L=Object(c["i"])("label",{for:"price",class:"form-label"},"單位",-1),S={class:"row gx-2"},V={class:"mb-3 col-md-6"},E=Object(c["i"])("label",{for:"origin_price",class:"form-label"},"原價",-1),K={class:"mb-3 col-md-6"},F=Object(c["i"])("label",{for:"price",class:"form-label"},"售價",-1),N=Object(c["i"])("hr",null,null,-1),B={class:"mb-3"},J=Object(c["i"])("label",{for:"description",class:"form-label"},"產品描述",-1),A={class:"mb-3"},q=Object(c["i"])("label",{for:"content",class:"form-label"},"說明內容",-1),z={class:"mb-3"},H={class:"form-check"},Q=Object(c["i"])("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1),R={class:"modal-footer"};function T(t,e,i,o,n,a){return Object(c["w"])(),Object(c["e"])("div",h,[Object(c["i"])("div",j,[Object(c["i"])("div",O,[g,Object(c["i"])("div",v,[Object(c["i"])("div",y,[Object(c["i"])("div",w,[k,Object(c["i"])("div",x,[D,Object(c["i"])("input",{ref:"fileInput",onChange:e[1]||(e[1]=function(t){return a.uploadImage()}),type:"file",id:"customFile",class:"form-control"},null,544)]),Object(c["i"])("img",{src:n.temp.imageUrl,class:"img-fluid",alt:""},null,8,["src"]),C]),Object(c["i"])("div",$,[Object(c["i"])("div",_,[U,Object(c["P"])(Object(c["i"])("input",{"onUpdate:modelValue":e[2]||(e[2]=function(t){return n.temp.title=t}),type:"text",class:"form-control",id:"title",placeholder:"請輸入標題"},null,512),[[c["K"],n.temp.title]])]),Object(c["i"])("div",M,[Object(c["i"])("div",P,[G,Object(c["P"])(Object(c["i"])("input",{"onUpdate:modelValue":e[3]||(e[3]=function(t){return n.temp.category=t}),type:"text",class:"form-control",id:"category",placeholder:"請輸入分類"},null,512),[[c["K"],n.temp.category]])]),Object(c["i"])("div",I,[L,Object(c["P"])(Object(c["i"])("input",{"onUpdate:modelValue":e[4]||(e[4]=function(t){return n.temp.unit=t}),type:"text",class:"form-control",id:"unit",placeholder:"請輸入單位"},null,512),[[c["K"],n.temp.unit]])])]),Object(c["i"])("div",S,[Object(c["i"])("div",V,[E,Object(c["P"])(Object(c["i"])("input",{"onUpdate:modelValue":e[5]||(e[5]=function(t){return n.temp.origin_price=t}),type:"number",class:"form-control",id:"origin_price",placeholder:"請輸入原價"},null,512),[[c["K"],n.temp.origin_price]])]),Object(c["i"])("div",K,[F,Object(c["P"])(Object(c["i"])("input",{"onUpdate:modelValue":e[6]||(e[6]=function(t){return n.temp.price=t}),type:"number",class:"form-control",id:"price",placeholder:"請輸入售價"},null,512),[[c["K"],n.temp.price]])])]),N,Object(c["i"])("div",B,[J,Object(c["P"])(Object(c["i"])("textarea",{"onUpdate:modelValue":e[7]||(e[7]=function(t){return n.temp.description=t}),type:"text",class:"form-control",id:"description",placeholder:"請輸入產品描述"},null,512),[[c["K"],n.temp.description]])]),Object(c["i"])("div",A,[q,Object(c["P"])(Object(c["i"])("textarea",{"onUpdate:modelValue":e[8]||(e[8]=function(t){return n.temp.content=t}),type:"text",class:"form-control",id:"content",placeholder:"請輸入產品說明內容"},null,512),[[c["K"],n.temp.content]])]),Object(c["i"])("div",z,[Object(c["i"])("div",H,[Object(c["P"])(Object(c["i"])("input",{"onUpdate:modelValue":e[9]||(e[9]=function(t){return n.temp.is_enabled=t}),class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,id:"is_enabled"},null,512),[[c["J"],n.temp.is_enabled]]),Q])])])])]),Object(c["i"])("div",R,[Object(c["i"])("button",{onClick:e[10]||(e[10]=function(e){return t.closeModal()}),type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"},"取消 "),Object(c["i"])("button",{onClick:e[11]||(e[11]=function(e){return t.$emit("emit-updateGoods",n.temp)}),type:"button",class:"btn btn-primary"},"確認")])])])],512)}var W=i("e0ae"),X={props:{nowData:{type:Object,default:function(){return{}}}},watch:{nowData:function(){this.temp=this.nowData}},data:function(){return{modal:{},temp:{}}},methods:{uploadImage:function(){var t=this,e=this.$refs.fileInput.files[0],i=new FormData;i.append("fileData",e);var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("vue-demo","/admin/upload");this.$http.post(c,i).then((function(e){t.temp.imageUrl=e.data.imageUrl}))}},mixins:[W["a"]]};X.render=T;var Y=X,Z=i("6ff1"),tt=i("b4e4"),et={inject:["emitter"],data:function(){return{data:[],pagination:{},temp:{},isNew:!1,isLoading:!1}},components:{Pagination:f["a"],Addbutton:tt["a"],Goodmodal:Y,Delmodal:Z["a"]},methods:{getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0;var i="".concat("https://vue3-course-api.hexschool.io","/api/").concat("vue-demo","/admin/products/?page=").concat(e);this.$http.get(i).then((function(e){t.data=e.data.products,t.pagination=e.data.pagination,t.isLoading=!1}))},openForm:function(t,e){this.temp=!0===t?{}:Object(m["a"])({},e),this.isNew=t,this.$refs.modal.openModal()},updateGoods:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("vue-demo","/admin/product"),i="post";this.isNew||(e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("vue-demo","/admin/product/").concat(this.temp.id),i="put"),this.temp.origin_price=parseInt(this.temp.origin_price),this.temp.price=parseInt(this.temp.price),this.$http[i](e,{data:this.temp}).then((function(e){t.isLoading=!0,t.$refs.modal.closeModal(),console.log(t.temp),e.data.success?t.isNew?t.emitter.emit("emit-toastMessage",{title:"更新成功",style:"success",content:"建立新商品"}):t.emitter.emit("emit-toastMessage",{title:"更新成功",style:"success",content:"商品編號 ".concat(t.temp.id," 已更新")}):t.emitter.emit("emit-toastMessage",{title:"更新失敗",style:"danger",content:e.data.message.join(",")}),t.getData(),t.isLoading=!1}))},enabledButton:function(t){var e=this;this.temp=t,this.temp.is_enabled=Number(!this.temp.is_enabled);var i="".concat("https://vue3-course-api.hexschool.io","/api/").concat("vue-demo","/admin/product/").concat(this.temp.id);this.$http.put(i,{data:this.temp}).then((function(t){console.log(t),e.emitter.emit("emit-toastMessage",{title:"更新成功",style:"success",content:"ID編號 ".concat(e.temp.id," 已更新")})}))},delCheck:function(t){this.temp=t,this.$refs.delcheck.openModal()},delItem:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("vue-demo","/admin/product/").concat(this.temp.id);this.$http.delete(e).then((function(e){t.isLoading=!0,console.log(e),t.$refs.delcheck.closeModal(),t.getData(),t.emitter.emit("emit-toastMessage",{title:"更新成功",style:"success",content:"ID編號 ".concat(t.temp.id," 已刪除")}),t.isLoading=!1}))}},created:function(){this.getData()}};i("3e7b");et.render=p;e["default"]=et},e01a:function(t,e,i){"use strict";var c=i("23e7"),o=i("83ab"),n=i("da84"),a=i("5135"),l=i("861d"),s=i("9bf2").f,r=i("e893"),d=n.Symbol;if(o&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var b={},u=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof u?new d(t):void 0===t?d():d(t);return""===t&&(b[e]=!0),e};r(u,d);var p=u.prototype=d.prototype;p.constructor=u;var m=p.toString,f="Symbol(test)"==String(d("test")),h=/^Symbol\((.*)\)[^)]+$/;s(p,"description",{configurable:!0,get:function(){var t=l(this)?this.valueOf():this,e=m.call(t);if(a(b,t))return"";var i=f?e.slice(7,-1):e.replace(h,"$1");return""===i?void 0:i}}),c({global:!0,forced:!0},{Symbol:u})}},eb6f:function(t,e,i){}}]);
//# sourceMappingURL=chunk-16a265b0.0d15595d.js.map